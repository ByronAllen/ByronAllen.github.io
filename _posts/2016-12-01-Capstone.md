---
layout: post
title: Tracking Land Conversion with Satellite Images and K-Means
---

**General Assembly Data Science Final Project**  <br />  <br />  Deforestation is a classic example of land conversion. The world's forests have in the past absorb as much as [30% of annual global anthropogenic CO2 emissions](http://www.nature.com/news/carbon-sequestration-managing-forests-in-uncertain-times-1.14687), a similar amount as the oceans, so we can easily say land conversion harms human ability to fight climate change. But how do we track this issue to know what we should do about it? 

Unfortunately, there is [only one year](https://www.nwf.org/News-and-Magazines/Media-Center/News-by-Topic/Wildlife/2013/9-18-13-USDA-Data-Grasslands-Forests-Being-Converted-to-Cropland-at-Alarming-Rates.aspx) of land conversion data in the U.S. available to the public. That is a huge problem if you want to ask, for example, 'Is the ethanol industry driving land conversion, making it a less viable source of renewable energy?' or 'Is law around the use of natural lands being broken?'

There is an alternative - create that public record using machine learning techniques and satellite images. Finding a method to do that became my capstone project for General Assembly's 12-week Data Science Immersive course. That began my investigation into to classifying individual pixels in satellite images as agriculture, non-agriculture or unsure/mixed, and examining changes in those pixels over time. 

*Figure 1: Final consolidated image with three classifications.*

![_config.yml]({{ site.baseurl }}/images/final_consolidated_image.png) 

If you prefer the video presentation click [here](https://youtu.be/vFg5IiQpe-o), or for the deck click [here](https://github.com/ByronAllen/Portfolio/blob/master/Filling%20the%20Land%20Conversion%20Gap%20(with%20video%20link).pdf). Otherwise, please read on. 

**Getting the Right Data**

Like all good data science challenges, I needed a strong training set. From the limited amount of publically available data I could tell that Nebraska had experienced the highest amount of land conversion compared to any other State in 2011, so it was a good location to investigate. Additionally, the middle of Nebraska clearly had a mix of agriculture and non-agriculture - the two land cover types I aimed to classify. I visually inspected this area via Google Earth Engine and decided to use Landsat 8 images from August of 2013, 2014 and 2015. This provided me with year-on-year data and data from the height of growing season when vegetation is most visible.  

I pulled two images per year - one included all 12 bands collected by the Landsat 8 satellite while the other contained a single band known as the Enhanced Vegetation Index (EVI). Each band (note band not image) contains over 50 million pixels equivalent to roughly one-fourth the size of Nebraska (see Figure 2 for more information). 

*Figure 2: A description of the data is on the left while the right shows the area of the image.*

![_config.yml]({{ site.baseurl }}/images/capstone_nb_map.png) 

**Is that Pixel Agriculture or Not?**

I used a two-pronged approach when classifying pixels - feeding a custom combination, or index, of bands through K-Means to generate labels and applying an agriculture mask generated from the EVI data. 

The unique index I created identified the strongest areas of vegetation while minimizing bare areas, e.g. (Vegetation Array = (band_6 + band_5 + band_2) / 3) - (Bare Earth Array = (band_6 + band_3 + band_2) / 3). I tested several numbers of clusters from k = 5 to k = 35. After examining silhouette scores and site inspecting, I decided k = 30 was the optimal number of clusters. After running my custom vegetation array through K-Means I apply the agriculture mask, which I generated by selecting the right-hand distribution in the EVI data (Figure 3). I did this to help reduce any some inaccurate classifications. 

*Figure 3: EVI distribution where red box descibes data used to generate the agriculture mask.*

![_config.yml]({{ site.baseurl }}/images/evi_distribution.png) 

At this point, I now had 31 labels but none were described in human-readable terms. The final step was to manually identify labeled pixels as either agriculture, not agriculture or somewhere in between, resulting in a final consolidated image or data set (Figure 1).

**Year-on-year Results**

The above process was repeated for all three years being considered. Pixels per classification were then summed by year to create a year-on-year comparison of land conversion (Figure 4). 

There appears to be a deline in natural lands between 2013 to 2014 along with an increase in agriculture lands during the same period - an indication of land conversion. Areas labeled mixed, or unsure, did increase over the entire period, which may be indications of drought, natural land regeneration, or other factors. Future annual analysis will help bring a deeper understanding of the movements seen between 2014 and 2015. 

*Figure 4: Year-on-year land conversion analysis.*

![_config.yml]({{ site.baseurl }}/images/capstone_annual_results.png) 





